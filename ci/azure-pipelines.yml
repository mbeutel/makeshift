# Azure Pipelines configuration

variables:
  system.debug: true
  revision: 4

  # Vcpkg repository
  vcpkgRef: e308474b85ff49f2b688a759351c4ec569636910

  # Repository with additional port and triplet overlays
  vcpkgOverlayRepo: 'https://mp-force.ziti.uni-heidelberg.de/asc/infrastructure/vcpkg-ports.git'
  vcpkgOverlayRef: a08517fb77e9d48d00dd33c16e5acd01f8b31f29

  # CMake build options
  cmakeConfigArgs: '-DMAKESHIFT_BUILD_TESTS=ON -DCMAKESHIFT_PRIVATE_COMPILE_SETTINGS=$<$<CONFIG:Debug>:runtime-checks;debug-stdlib>'

trigger:
- master
- mr/*

pr:
- master

jobs:
- template: azure-pipelines-windows.yml
  parameters:
    compilers:

    - os: Windows
      compiler: MSVC
      versions: [2019]
      platforms: [x86, x64]

    - os: Windows
      compiler: Clang
      versions: [9]
      platforms: [x86, x64]

    - os: Linux
      compiler: GCC
      versions: [9]
      platforms: [x64]

    - os: Linux
      compiler: Clang
      versions: [9]
      platforms: [x64]

    - os: MacOS
      compiler: GCC
      versions: [9]
      platforms: [x64]

    - os: MacOS
      compiler: AppleClang
      versions: [11]
      platforms: [x64]
